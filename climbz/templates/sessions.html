{% extends "main.html" %}
{% block content %}

<!-- Possible additional columns: 
        - Max./Avg. grade/inclination 
    -->


<h1>Sessions</h1>

<table id="content_table" class="table table-striped table-hover">
    <thead>
        <tr>
            <th>Date</th>
            <th>Area</th>
            <th>Conditions</th>
            <th># Routes</th>
            <th># Sends</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        {% for session in sessions %}
        {% set onclick = "window.location=\"" + url_for('sessions.page_session', session_id=session.id) + "\"" %}
        <tr>
            <td onclick={{ onclick }}>{{ session.date }}</td>
            <td onclick={{ onclick }}>{{ session.area.name }}</td>
            <td onclick={{ onclick }}>{{ session.conditions }}</td>
            <td onclick={{ onclick }}>{{ session.climbs|length }}</td>
            <td onclick={{ onclick }}>{{ session.climbs|map(attribute='sent')|sum }}</td>
            <td>
                <a href="{{ url_for('sessions.edit_session', session_id=session.id) }}">
                    {% include 'icons/edit.html' %}
                </a>
                <a href="{{ url_for('sessions.delete_session', session_id=session.id) }}">
                    {% include 'icons/delete.html' %}
                </a>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<script>
    window.addEventListener('load', function () {
        window.data_table = new DataTable("#content_table", {
            perPage: 100,
            perPageSelect: false,
            searchable: false,
            nextPrev: false,
        });
    });
</script>


{% endblock content %}