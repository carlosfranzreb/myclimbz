<div class="container px-0 px-lg-5">
    <h1 class="ms-3 mt-2">Sessions</h1>
    <table id="content_table" class="table table-hover">
        <thead>
            <tr>
                <th>Date</th>
                <th>Area</th>
                <th>Conditions</th>
                <th># Routes</th>
                <th># Sends</th>
                {% if session.climber_id == user_id %}
                    <th>Actions</th>
                {% endif %}
            </tr>
        </thead>
        <tbody>
            {% for session in sessions %}
            {% set onclick = "window.location=\"" + url_for('sessions.page_session', session_id=session.id) + "\"" %}
            <tr>
                <td onclick={{ onclick }}>{{ session.date }}</td>
                <td onclick={{ onclick }}>{{ session.area.name }}</td>
                <td onclick={{ onclick }}>{{ session.conditions }}</td>
                <td onclick={{ onclick }}>{{ session.climbs|length }}</td>
                <td onclick={{ onclick }}>{{ session.climbs|map(attribute='sent')|sum }}</td>
                {% if session.climber_id == user_id %}
                    <td>
                        <a href="{{ url_for('sessions.edit_session', session_id=session.id) }}">
                            {% include 'icons/edit.html' %}
                        </a>
                        <a href="{{ url_for('sessions.delete_session', session_id=session.id) }}">
                            {% include 'icons/delete.html' %}
                        </a>
                        {% if not open_session %}
                        <a href="{{ url_for('sessions.reopen_session', session_id=session.id) }}">
                            {% include 'icons/reopen.html' %}
                        </a>
                        {% endif %}
                    </td>
                {% endif %}
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

         

<script>
    window.addEventListener('load', function () {
        window.data_table = new DataTable("#content_table", {
            perPage: 100,
            perPageSelect: false,
            searchable: false,
            nextPrev: false,
        });
    });
</script>