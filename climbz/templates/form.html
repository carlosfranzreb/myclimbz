{% extends "main.html" %}
{% block content %}

<!--  Display the form for editing an existing route, or adding/editing an opinion -->

<h2>{{ title }}</h2>

<div class="container">
    <form method="POST" style="margin: 40px;">
        {{ form.hidden_tag() }}
        {% for field in form %}
        {% if field.name != 'csrf_token' and field.name != "submit" and field != form.existing_route %}
        <div class="form-group">
            <label for="{{ field.id }}">{{ field.label }}</label>

            {% if field.type == 'BooleanField' %}
            {% if field.toggle_ids %}
            {{ field(id=field.id, class='form-check', onchange='checkboxToggle("' + field.id + '", "' + field.toggle_ids
            +
            '")') }}
            {% else %}
            {{ field(id=field.id, class='form-check') }}
            {% endif %}


            {% elif field.datalist %}
            {% set datalist_name = field.name + '-list' %}
            <datalist id="{{ field.name }}-list">
                {% for item in field.datalist %}
                <option value="{{ item }}"></option>
                {% endfor %}
            </datalist>
            {% if field.toggle_ids %}
            {{ field(id=field.id, class='form-control', list=datalist_name, autocomplete='off',
            onchange='datalistToggle("' + field.id + '", "' + datalist_name + '", "' + field.toggle_ids
            +
            '")') }}
            {% else %}
            {{ field(id=field.id, class='form-control', list=datalist_name, autocomplete='off') }}
            {% endif %}

            {% else %}
            {{ field(id=field.id, class='form-control') }}

            {% endif %}
        </div>
        {% endif %}
        {% endfor %}

        <div class="form-group">
            <input type="submit" name="btn" value="Save">
            <a type="button" class="btn btn-danger" value="Cancel" href="{{ url_for('home.cancel_form') }}">
                Cancel
            </a>
        </div>
    </form>
</div>

{% endblock content %}